<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta content="version" value="üè∑Ô∏è v2.3.0">
<meta content="repo" value="Morpheus">
<meta content="tikey" value="382adcd3-aa05-4ab9-885e-6caedf702bfe">
<meta content="tidate" value="2025-AUG-15">
<script>
    document.title = "Chachi Calculator";
</script>
<style>
@import url("https://unpkg.com/tabulator-tables@6.3.1/dist/css/tabulator.min.css");
@import url("./style/chachi.css");
</style>
<style>
header {
    font-size : 12px;
    line-height : 22px;
}
menu button {
    z-index : 2000;
}
.version {
    z-index : 1000;
    background-color: transparent;
    width : 30ch;
    bottom : 1ch !important;
    right  : 3ch !important;    
    left   : unset !important;    
    margin  : 0 !important;
}
.version * {
    z-index : 0;
    width : 100%;
    background-color: cadetblue;
    padding : 0.2ch;
    padding-left  : 1.2ch;
    padding-right : 1.2ch;
    border-radius : 3ch;
    height : 2.8ch;
    line-height : 2.8ch;
}
.version summary {
    display : block;
    font-weight: 900;
}
#appVersion {
    display : inline-block;
    margin  : 0 !important;
}
#appVersion:before {
    content : "‚ú®" !important;
}
</style>
<link rel="icon" href="./favicon.ico" />
</head>

<header>
<nav>
    <a href="https://nyteowldave.github.io" 
       title="‚ãÑ Home Page ‚ãÑ">‚ãÑ Home ‚ãÑ</a>
    <a href="https://whiteboard.microsoft.cloud/me/whiteboards/cee00952-f1c2-4c24-814f-622ab833b81d"
       title="‚ãÑ Whiteboard ‚ãÑ">‚ãÑ Whiteboard ‚ãÑ</a>
    <a href="https://sites.google.com/view/chachi-calculator/home"
       title="‚ãÑ Google Site ‚ãÑ">‚ãÑ G-Site ‚ãÑ</a>
    <a href="https://1drv.ms/o/c/A698F7622548FA93/ArLr_UCaYllAvqLpNpmsDJM?e=hpMdum"
       title="‚ãÑ Notebook ‚ãÑ">‚ãÑ Notebook ‚ãÑ</a>
    <a href="https://nyteowldave.github.io" 
       title="‚ãÑ Home Page ‚ãÑ">‚ãÑ Morpheus ‚ãÑ</a>
</nav>
</header>


<footer>
<details class="version">
    <summary>üè∑Ô∏è Version</summary>
    <span id="appVersion">
        v2.1.0 ~ 2025-AUG-11
    </span>
</details>
<menu>
    <button onclick="runInput()" title="Run Javascript\n[ALT]+[ENTER]">Run</button>
    <button onclick="clearOutput()" title="Clear Output\n[ALT]+[T]"><i class="si-trash"></i></button>
    <button onclick="zoomEditor()" title="Zoom Editor\n[ALT]+[Z]"><i class="si-fullscreen"></i> Editor</button>
    <button onclick="zoomOutput()" title="Zoom Output\n[ALT]+[Z]"><i class="si-fullscreen"></i> Output</button>
    <button onclick="zoomCanvas()" title="Zoom Canvas\n[ALT]+[Z]"><i class="si-fullscreen"></i> Canvas</button>
    <button onclick="showMathHelp()" title="Reference\n[ALT]+[?]"><i class="si-info-circle"></i></button>
</menu>
</footer>

<!-- [ 
    run             [ALT]+[ENTER]
    clear           [ALT]+[T]
    help            [ALT]+[?]
    download        [ALT]+[S]
    upload          [ALT]+[L]
    swap            [ALT]+[X]
    zoom            [ALT]+[Z]
    methods         [ALT]+[/]
    push            [ALT]+[.]
    pop             [ALT]+[,]
    peek            [ALT]+[@]
    poke            [ALT]+[!]
    toggleCanvas    [ALT]+[G] or [ALT]+[SCRLK]
    toggleButtons   [ALT]+[M] or [SCRLCK]
] -->

<main>

<div>
<pre id="sop"></pre>
    <hr>
<textarea id="sip" wrap="off" rows="10"></textarea>
    <hr>
<div>
<menu>
    <button class="math-plus" onclick="clearInput()" title="Clear Editor">CE</button>
    <button class="math-plus" onclick="persist()" title="Memory">M</button>
    <button class="math-plus" onclick="recover()" title="Recall">R</button>
</div>
</div>
<div id="menuContainer"></div>
    <hr>
<canvas id="canvas"></canvas>
    <hr>
</div>

<!-- From Uiverse.io by njesenberger --> 
<div class="toggle-wrapper">
  <div class="toggle-label">Auto Solver</div>
  <input class="toggle-checkbox" type="checkbox" id="autoRunEnable">
  <div class="toggle-container">  
    <div class="toggle-button">
      <div class="toggle-button-circles-container">
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
      </div>
    </div>
  </div>
</div>

</main>

<script details="App Modules Registry">
const AppModules = { core : [] };
AppModules.map = new Map();
AppModules.add = function( key, value={} ) {
    const we = AppModules;
    key = String( key ) || "";
    value = value || {};
    we.map.set( key, value );    
}
AppModules.doc = function( value={} ) {
    const we = AppModules;
    value = value || {};
    we.core.push( value );    
}
AppModules.report = function() {
    function mods( k ) {
        switch ( k.toLowerCase() ) {
            case "class":
            case "string":
            case "function":
            case "number":
                return false;
            default:
                return true;
        }
    }
    const we = AppModules;
    const table = Array.from( we.map.keys() )
        .filter( mods );
    console.group( "App Module Registry" );
    console.table( table );
    console.groupEnd();
}
</script>

<script src="./api/tigg.js"></script>
<script src="./api/thor.js"></script>
<script src="./api/legends.js"></script>
<script src="./api/coredoc.js"></script>
<script src="./api/prep.js"></script>
<script src="./api/math.js"></script>
<script src="./api/mathvec.js"></script>
<script src="./api/mathplus.js"></script>
<script src="./api/jasoom.js"></script>
<script src="./api/transcend.js"></script>
<script src="./api/eratothenes.js"></script>
<script src="./api/factors.js"></script>
<script src="./api/keisha.js"></script>
<script src="./api/graph.js"></script>
<script src="./api/editables.js"></script>
<script src="./api/energize.js"></script>
<script src="./api/jarvis.js"></script>
<script src="./api/joni.js"></script>
<script src="./api/sio.js"></script>
<script src="./api/play-beep.js"></script>
<script src="./api/chachi.js"></script>

 
<!--
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.11.3/p5.min.js"></script>
<script type="module" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.min.js"></script>
-->

<script external src="https://unpkg.com/mathjs@14.5.2/lib/browser/math.js"></script>
<script external src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.5.0/mermaid.min.js"></script>
<script external src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script external src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.30.1/moment.min.js"></script>
<script external src="https://unpkg.com/tabulator-tables@6.3.1/dist/js/tabulator.min.js"></script>
<script external src="https://cdn.jsdelivr.net/npm/underscore@1.13.7/underscore-umd-min.js"></script>


<!--
TODO:   See chachi.js
-->

<script>
const sip = document.getElementById( 'sip' );
const sop = document.getElementById( "sop" );
</script>

<script>
sip.fetchAPI = async function( url, target ) {
    if (! sip ) {
        throw new Error( "Missing SIP reference" );
    }
    if (! sop ) {
        throw new Error( "Missing SOP reference" );
    }
    function run( script ) { 
        try {
            if ( target instanceof HTMLElement ) {
                console.log( "Assigning Fetched Script to Gadget" );
                if ( "string" === typeof target.value ) {
                    target.value = script;
                } else {
                    target.innerText = script;
                }
                return;
            }
            console.log( "Evaluating Fetched Script" );
            sop.innerText = window.eval( script );
        } catch ( e ) {
            sop.innerText = e;
            throw e;
        }
    }
    url = url ? url.trim() : "";
    url = url || "./api/sip-ops.js";
    return await fetchSavedScript( url , run, null );
}
</script>

<script>
sip.memoFetch = async function( target ) {
    sip.fetchAPI( "./api/memo.js" ); 
}
</script>

<script>
function main() {
    // Start AUTO-SOLVE Timer
    setInterval( solve, 1000 );
    // Get rid of old O/P (if any)
    clearOutput();
    // If persistent storage is available, use it
    // NOTE: Hack for ReText JS Engine
    const cacheOK = ( localStorage instanceof Storage );
    if ( cacheOK ) {
        recover();
        restoreState();
        addEventListener( 'beforeunload', preserveState );
    }
    // Initial Editor Width
    sip.style.width = "80%";
    // Application Version Gadget
    initAppVersion();
    // Math Menu
    initMathMenu();
    // Initialize sip editor
    initEditor( sip );
    // Make PRE elements editable
    editables( 'pre' );
    // Load SIP API Script (sip-ops.js)
    sip.fetchAPI();
}
</script>

<script>
addEventListener( 'load', () => {
    han( main );
} );
</script>
<!--
    üÖªüÖ∞üÜÇüÜÉ üÜÑüÖøüÖ≥üÖ∞üÜÉüÖ¥üÖ≥ ~ 2025-AUG-12 ~ Omega
-->
</body>
</html>
