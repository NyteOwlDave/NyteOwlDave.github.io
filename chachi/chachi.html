<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<script>
    document.title = "Chachi Calculator";
</script>
<style>
@import url("https://unpkg.com/tabulator-tables@6.3.1/dist/css/tabulator.min.css");
@import url("./style/chachi.css");
</style>
<style>
header {
    font-size : 18px;
    line-height : 28px;
}
</style>
<link rel="icon" href="./favicon.ico" />
</head>

<header>
<nav>
    <a href="https://nyteowldave.github.io" 
       title="‚ãÑ Home Page ‚ãÑ">‚ãÑ Home ‚ãÑ</a>
    <a href="https://whiteboard.office.com/me/whiteboards/9e35193f-649f-4a64-8322-58a27273aaa6"
       title="‚ãÑ Whiteboard ‚ãÑ">‚ãÑ Whiteboard ‚ãÑ</a>
    <a href="./app-content.html"
       title="‚ãÑ 3P ‚ãÑ">‚ãÑ 3P ‚ãÑ</a>
    <a href="https://mathjs.org/examples/index.html" 
       title="‚ãÑ MathJS ‚ãÑ">‚ãÑ MathJS ‚ãÑ</a>
    <a href="http://dave-omega/std/app/morpheus/chachi/chachi.html" 
       title="‚ãÑ üîê Chachi LAN ‚ãÑ">‚ãÑ üîê LAN ‚ãÑ</a>
</nav>
</header>

<footer>
<menu>
    <button onclick="runInput()" title="Run Javascript">Run</button>
    <button onclick="clearOutput()" title="Clear Output"><i class="si-trash"></i></button>
    <button onclick="zoomEditor()" title="Zoom Editor"><i class="si-fullscreen"></i> Editor</button>
    <button onclick="zoomCanvas()" title="Zoom Canvas"><i class="si-fullscreen"></i> Canvas</button>
    <button onclick="zoomOutput()" title="Zoom Output"><i class="si-fullscreen"></i> Output</button>
    <button onclick="showMathHelp()" title="Reference"><i class="si-info-circle"></i></button>
    <button onclick="onlineClipboard()" title="Online Clipboard"><i class="si-clipboard"></i></button>
    <button onclick="mathOlympiad()" title="Math Olympiad"><i class="si-video"></i></button>
</menu>
</footer>

<main>

<div>
<pre id="sop"></pre>
    <hr>
<textarea id="sip" wrap="off" rows="10"></textarea>
    <hr>
<div>
<menu>
    <button class="math-plus" onclick="clearInput()" title="Clear Editor">CE</button>
    <button class="math-plus" onclick="persist()" title="Memory">M</button>
    <button class="math-plus" onclick="recover()" title="Recall">R</button>
</div>
</div>
<div id="menuContainer"></div>
    <hr>
<canvas id="canvas"></canvas>
    <hr>
</div>

<!-- From Uiverse.io by njesenberger --> 
<div class="toggle-wrapper">
  <div class="toggle-label">Auto Solver</div>
  <input class="toggle-checkbox" type="checkbox" id="autoRunEnable">
  <div class="toggle-container">  
    <div class="toggle-button">
      <div class="toggle-button-circles-container">
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
      </div>
    </div>
  </div>
</div>

</main>

<script details="App Modules Registry">
const AppModules = { core : [] };
AppModules.map = new Map();
AppModules.add = function( key, value={} ) {
    const we = AppModules;
    key = String( key ) || "";
    value = value || {};
    we.map.set( key, value );    
}
AppModules.doc = function( value={} ) {
    const we = AppModules;
    value = value || {};
    we.core.push( value );    
}
AppModules.report = function() {
    function mods( k ) {
        switch ( k.toLowerCase() ) {
            case "class":
            case "string":
            case "function":
            case "number":
                return false;
            default:
                return true;
        }
    }
    const we = AppModules;
    const table = Array.from( we.map.keys() )
        .filter( mods );
    console.group( "App Module Registry" );
    console.table( table );
    console.groupEnd();
}
</script>

<script src="./api/tigg.js"></script>
<script src="./api/thor.js"></script>
<script src="./api/legends.js"></script>
<script src="./api/coredoc.js"></script>
<script src="./api/prep.js"></script>
<script src="./api/math.js"></script>
<script src="./api/mathvec.js"></script>
<script src="./api/mathplus.js"></script>
<script src="./api/jasoom.js"></script>
<script src="./api/transcend.js"></script>
<script src="./api/eratothenes.js"></script>
<script src="./api/factors.js"></script>
<script src="./api/keisha.js"></script>
<script src="./api/graph.js"></script>
<script src="./api/editables.js"></script>
<script src="./api/energize.js"></script>
<script src="./api/jarvis.js"></script>
<script src="./api/joni.js"></script>
<script src="./api/sio.js"></script>
<script src="./api/chachi.js"></script>

 
<!--
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.11.3/p5.min.js"></script>
<script type="module" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.min.js"></script>
-->

<script external src="https://unpkg.com/mathjs@14.5.2/lib/browser/math.js"></script>
<script external src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.5.0/mermaid.min.js"></script>
<script external src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script external src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.30.1/moment.min.js"></script>
<script external src="https://unpkg.com/tabulator-tables@6.3.1/dist/js/tabulator.min.js"></script>
<script external src="https://cdn.jsdelivr.net/npm/underscore@1.13.7/underscore-umd-min.js"></script>


<!--
TODO:   See chachi.js
-->

<script>
</script>

<script>
function main() {
    // Start AUTO-SOLVE Timer
    setInterval( solve, 1000 );
    // Get rid of old O/P (if any)
    clearOutput();
    // If persistent storage is available, use it
    // NOTE: Hack for ReText JS Engine
    const cacheOK = ( localStorage instanceof Storage );
    if ( cacheOK ) {
        recover();
        restoreState();
        addEventListener( 'beforeunload', preserveState );
    }
    // Initial Editor Width
    sip.style.width = "80%";
    // Math Menu
    initMathMenu();
    // Initialize sip editor
    initEditor( sip );
    // Make PRE elements editable
    editables( 'pre' );
}
</script>

<script>
addEventListener( 'load', () => {
    han( main );
} );
</script>

</body>
</html>
