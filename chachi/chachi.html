<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<!-- Used to Update Version Gadget -->
<meta content="repo" value="Morpheus">3
<meta content="tikey" value="382adcd3-aa05-4ab9-885e-6caedf702bfe">
<meta content="tidate" value="2026-FEB-09">3
<meta content="version" value="üè∑Ô∏è v2.4.2">
<script>
    document.title = "Chachi Calculator";
</script>
<style>
@import url("https://unpkg.com/tabulator-tables@6.3.1/dist/css/tabulator.min.css");
@import url("./style/chachi.css");
</style>
<link rel="icon" href="./favicon.ico" />
</head>

<header>
<nav>
    <a href="./dot/home.html" 
       title="‚ãÑ Home Page ‚ãÑ">‚ãÑ Home ‚ãÑ</a>
    <a href="https://sites.google.com/view/chachi-calculator/home"
       title="‚ãÑ Google Site ‚ãÑ">‚ãÑ G-Site ‚ãÑ</a>
    <a href="https://whiteboard.microsoft.cloud/me/whiteboards/cee00952-f1c2-4c24-814f-622ab833b81d"
       title="‚ãÑ Whiteboard ‚ãÑ">‚ãÑ Whiteboard ‚ãÑ</a>
    <a href="https://1drv.ms/o/c/A698F7622548FA93/ArLr_UCaYllAvqLpNpmsDJM?e=hpMdum"
       title="‚ãÑ Notebook ‚ãÑ">‚ãÑ Notebook ‚ãÑ</a>
    <a href="https://nyteowldave.github.io/thalia/" 
       title="‚ãÑ Home Page ‚ãÑ">‚ãÑ Thalia ‚ãÑ</a>
    <a href="https://nyteowldave.github.io/tigg/" 
       title="‚ãÑ Home Page ‚ãÑ">‚ãÑ TiGG ‚ãÑ</a>
</nav>
</header>

<footer>
<details class="version">
    <summary>üè∑Ô∏è Version</summary>
    <span id="appVersion">
        <!-- SEE : meta content="version" -->
        <!-- SEE : initAppVersion()       -->
    </span>
</details>
<menu>
    <button onclick="runInput()" title="Run Javascript\n[ALT]+[ENTER]">Run</button>
    <button onclick="clearOutput()" title="Clear Output\n[ALT]+[T]"><i class="si-trash"></i></button>
    <button onclick="zoomEditor()" title="Zoom Editor\n[ALT]+[Z]"><i class="si-fullscreen"></i> Editor</button>
    <button onclick="zoomOutput()" title="Zoom Output\n[ALT]+[Z]"><i class="si-fullscreen"></i> Output</button>
    <button onclick="zoomCanvas()" title="Zoom Canvas\n[ALT]+[Z]"><i class="si-fullscreen"></i> Canvas</button>
    <button onclick="showMathHelp()" title="Reference\n[ALT]+[?]"><i class="si-info-circle"></i></button>
    <button onclick="_keys()" title="Show Store Keys"><i class="si-lock"></i></button>
    <button onclick="_mods()" title="Show Registered Modules"><i class="si-box"></i></button>
    <button onclick="file('open')" title="Open a file"><i class="si-folder"></i></button>
    <button onclick="file('save')" title="Save as file"><i class="si-disk"></i></button>
    <button onclick="file('download')" title="Download a remote file"><i class="si-download"></i></button>
    <button onclick="file('upload')" title="Upload a remote file"><i class="si-upload"></i></button>
</menu>
</footer>

<main>

<div details="I/O Gadgets">

<div details="SOP Viewer">
<pre id="sop"></pre>
</div>

<div details="SIP Editor">
<textarea id="sip" wrap="off" rows="10"></textarea>
</div>

<div details="SIP Menu">
    <menu>
        <button class="math-plus" onclick="clearInput()" title="Clear Editor">CE</button>
        <button class="math-plus" onclick="persist()" title="Memory">M</button>
        <button class="math-plus" onclick="recover()" title="Recall">R</button>
    </menu>
</div>

<div id="menuContainer"></div>

<div details="Canvas">
<canvas id="canvas"></canvas>
</div>

</div>

<!-- From Uiverse.io by njesenberger --> 
<div class="toggle-wrapper">
  <div class="toggle-label">Auto Solver</div>
  <input class="toggle-checkbox" type="checkbox" id="autoRunEnable">
  <div class="toggle-container">  
    <div class="toggle-button">
      <div class="toggle-button-circles-container">
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
        <div class="toggle-button-circle"></div>
      </div>
    </div>
  </div>
</div>

</main>


<!-- ~~~~~~~~~~~~~~ [[[ EMBEDDED SCRIPTS ]]] ~~~~~~~~~~~~~~ -->

<script details="App Modules Registry">
const AppModules = { core : [] };
AppModules.map = new Map();
AppModules.add = function( key, value={} ) {
    const we = AppModules;
    key = String( key ) || "";
    value = value || {};
    we.map.set( key, value );    
}
AppModules.doc = function( value={} ) {
    const we = AppModules;
    value = value || {};
    we.core.push( value );    
}
AppModules.report = function() {
    function mods( k ) {
        switch ( k.toLowerCase() ) {
            case "class":
            case "string":
            case "function":
            case "number":
                return false;
            default:
                return true;
        }
    }
    const we = AppModules;
    const table = Array.from( we.map.keys() )
        . filter( mods );
    console.group( "App Module Registry" );
    console.table( table );
    console.groupEnd();
}
AppModules.list = function() {
    function mods( k ) {
        switch ( k.toLowerCase() ) {
            case "class":
            case "string":
            case "function":
            case "number":
                return false;
            default:
                return true;
        }
    }
    const we = AppModules;
    const table = Array.from( we.map.keys() )
        . filter( mods )
        . map( mod => ( `‚ìÇÔ∏è ${mod}` ) );
    say( table.join( "\n" ) );
}
function _mods() {
    AppModules.list();
}
function _keys() {
    say(
        keyss()
        . sort()
        . join( "\n" )
    );
}
</script>

<script details="SOP Write">
function say( s ) {
    sop.innerText = ( s );
    return ( s );
}
function mention( s ) {
    let t = sop.innerText;
    return say( ( t ) ? ( `${t}\n${s}` ) : ( s ) );
}
</script>

<script details="SOP Write with Decals">
function blurt( s ) {
    return mention( `üü¢=> ${s}` );
}
function dangit( s ) {
    return mention( `üü° ${s}` );
}
function bummer( e ) {
    let s = (
          ( e instanceof Error )
        ? ( e.message )
        : ( e )
    );
    return mention( `üî¥ ${s}` );
}
</script>

<script src="./api/tigg.js"></script>
<script src="./api/thor.js"></script>
<script src="./api/legends.js"></script>
<script src="./api/coredoc.js"></script>
<script src="./api/prep.js"></script>
<script src="./api/bonfire.js"></script>
<script src="./api/math.js"></script>
<script src="./api/mathvec.js"></script>
<script src="./api/mathplus.js"></script>
<script src="./api/jasoom.js"></script>
<script src="./api/transcend.js"></script>
<script src="./api/eratothenes.js"></script>
<script src="./api/factors.js"></script>
<script src="./api/keisha.js"></script>
<script src="./api/graph.js"></script>
<script src="./api/editables.js"></script>
<script src="./api/energize.js"></script>
<script src="./api/jarvis.js"></script>
<script src="./api/joni.js"></script>
<script src="./api/sio.js"></script>
<script src="./api/play-beep.js"></script>
<script src="./api/chachi.js"></script>

 
<!--
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.11.3/p5.min.js"></script>
<script type="module" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.min.js"></script>
-->

<script external src="https://unpkg.com/mathjs@14.5.2/lib/browser/math.js"></script>
<script external src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.5.0/mermaid.min.js"></script>
<script external src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script external src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.30.1/moment.min.js"></script>
<script external src="https://unpkg.com/tabulator-tables@6.3.1/dist/js/tabulator.min.js"></script>
<script external src="https://cdn.jsdelivr.net/npm/underscore@1.13.7/underscore-umd-min.js"></script>

<script details="SIO Aliases">
const sip = document.getElementById( 'sip' );
const sop = document.getElementById( "sop" );
</script>

<script details="Download API Module into SIP Editor">
sip.fetchAPI = async function( url, target ) {
    if (! sip ) {
        throw new Error( "Missing SIP reference" );
    }
    if (! sop ) {
        throw new Error( "Missing SOP reference" );
    }
    function run( script ) { 
        try {
            if ( target instanceof HTMLElement ) {
                console.log( "Assigning Fetched Script to Gadget" );
                if ( "string" === typeof target.value ) {
                    target.value = script;
                } else {
                    target.innerText = script;
                }
                return;
            }
            console.log( "Evaluating Fetched Script" );
            sop.innerText = window.eval( script );
        } catch ( e ) {
            sop.innerText = e;
            throw e;
        }
    }
    url = url ? url.trim() : "";
    url = url || "./api/sip-ops.js";
    return await fetchSavedScript( url , run, null );
}
</script>

<script details="Download memo.js API Module">
sip.memoFetch = async function( target ) {
    sip.fetchAPI( "./api/memo.js" ); 
}
</script>

<script details="Load Event Handler">
function main() {
    document.body.spellcheck = false;
    window.keep = function( k ) {    
        k = ( k || window.STORE_KEY );
        v = sip.value;
        save( k, v );
        s = ( `Wrote ${k} to Store` );
        console.log( s );
        return ( s );
    };
    // Start AUTO-SOLVE Timer
    setInterval( solve, 1000 );
    // Get rid of old O/P (if any)
    clearOutput();
    // If persistent storage is available, use it
    // NOTE: Hack for ReText JS Engine
    const cacheOK = ( localStorage instanceof Storage );
    if ( cacheOK ) {
        recover();
        restoreState();
        addEventListener( 'beforeunload', preserveState );
    }
    // Initial Editor Width
    sip.style.width = "80%";
    // Application Version Gadget (chachi.js)
    initAppVersion();
    // Math Menu (chachi.js)
    initMathMenu();
    // Initialize sip editor (chachi.js)
    initEditor( sip );
    // Make PRE elements editable
    editables( "PRE" );
    // Load SIP API Script (sip-ops.js)
    sip.fetchAPI();
}
</script>

<script details="File I/O">
function file( op ) {
    try {
        let action = file.action[ op ];
        if ( "function" === typeof action ) {
            action();
        } else {
            alert( `No action is assigned for "${op}"` );
        }
    } catch ( e ) {
        bummer( e );
    }
}
</script>

<script details="File Prompt">
file.prompt = function( query, value ) {
    value = ( value || "" );
    let s = window.prompt( query, value );
    return (
          ( s ) 
        ? ( s.trim() )
        : ( value )
    );
};
file.action = {};
file.recent = {
  url : "https://nyteowldave.github.io/chachi/api/file.list"
, filename : "chachi-script.js"
};
</script>

<script details="File Open">
file.action.open = function() {
    chooseFile( sip );
};
</script>

<script details="File Save">
file.action.save = function() {
    let filename = ( 
           ( file.recent.filename )
        || ( "chachi-script.js"   )
    );
    if (! filename ) { return; }
    rico( sip.value, filename );
    console.log( s );
    mention( s );
};
</script>

<script details="File Download">
file.action.download = function() {
    let url = ( 
           ( file.recent.url )
        || ( "https://nyteowldave.github.io/chachi/api/file.list" )
    );
    let query = "Address to Download?";
    url = file.prompt( query, url );
    if (! url ) { return; }
    sip.fetchAPI( url );
};
</script>

<script details="File Upload">
file.action.upload = function() {
    save( "Chachi Upload", sip.value );
    window.open( "./upload.html" );
};
</script>

<script>
let OPEN_OPTIONS = "";
function openURL( url, options ) {
    options = ( options || OPEN_OPTIONS );
    return window.open( url, url, options );
}
</script>

<script>
function zeek( port, host, options ) {
    if ( port && host ) {
        let origin = "http://" + host;
        return openURL( origin + ":" + port );
    } else {
        return openURL( "zeek.html", options );
    }
}
</script>

<script>
const Lola = {};
Lola.safeKey = function( k ) {
    k = ( k || window.STORE_KEY );
    if ( k ) { return k; }
    return ( window.STORE_KEY = "lola-store.js" );
}
Lola.keep = function( k ) {
    k = Lola.safeKey( k );
    save( k, sip.value );
    console.log( `Wrote "${k}" to Store` );
    return ( k );
}
Lola.recall = function( k ) {
    k = Lola.safeKey( k );
    let v = load( k );
    if ( null !== v ) {
        sip.value = ( v );
        console.log( `Read "${k}" from Store` );
    } else {
        console.warn( `Missing Store Key "${k}"` );
    }
    return ( k );
}
Lola.snippet = ( `
keep = function() {    
    k = STORE_KEY;
    v = sip.value;
    save( k, v );
    s = ( \`Wrote \${k} to Store\` );
    console.log( s );
    return ( s );
};
` )
</script>

<script>
addEventListener( 'load', () => {
    han( main );
} );
</script>

<!-- [ 

    ~~~~~~~~~~~~~~~~~~~~
    | PROPOSED HOTKEYS |
    ~~~~~~~~~~~~~~~~~~~~

    run             [ALT]+[ENTER]
    clear           [ALT]+[T]
    help            [ALT]+[?]
    download        [ALT]+[S]
    upload          [ALT]+[L]
    personal        [ALT]+[P]
    swap            [ALT]+[X]
    zoom            [ALT]+[Z]
    methods         [ALT]+[/]
    push            [ALT]+[.]
    pop             [ALT]+[,]
    peek            [ALT]+[@]
    poke            [ALT]+[!]
    toggleCanvas    [ALT]+[G] or [ALT]+[SCRLK]
    toggleButtons   [ALT]+[M] or [SCRLCK]
] -->

<!--
    UPDATED ~ 2026-FEB-09 ~ Legacy
-->

</body>
</html>
