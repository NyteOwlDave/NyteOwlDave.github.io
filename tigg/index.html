<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>TIGG</title>
<link rel="icon" href="./favicon.ico">
<style>
/* @import url(""); */
head, body {
    margin  : 0;
    padding : 0;
    text-align : center;
    color : #040442;
    background : rgb(212, 242, 222);
}
body {
    margin-bottom : 42vh;
    border  : 4px solid transparent;
    font-family : sans-serif;
}
textarea#sip ,
input#tikey {
    width : 80%;
}
input#keyCount {
    border : 2px solid transparent;
    text-align : center;
    width : 8ch;
}
.error {
    border : 2px solid red !important;
}
menu {
    margin-left : 0;
    padding : 4px;
}
img[alt="Logo"] {
    width : 100px;
}
</style>
<script src="./tigg.js"></script>
</head>
<body>
<header>    
    <figure>
        <img src="./favicon.ico" alt="Logo" title="TiGG">
    </figure>
    <h1>ðŸ¦‡ TiGG</h1>
    <h4>Your Tiny GUID Generator</h4>
</header>

<h2>ðŸ”‘ Single Key</h2>
<div>
    <input id="tikey" placeholder="(tikey)">
</div>
<div>
<menu>
    <button onclick="singleKey()">ðŸª„ Generate</button>
</menu>
</div>

<h2>ðŸ“¦ Multiple Keys</h2>
<div>
    <textarea id="sip" wrap="off" rows="11">
    </textarea>
</div>
<div>
<menu>
 &nbsp;
    <button title="Open" onclick="importFile()">ðŸ“¤ </button>
    <button title="Save" onclick="exportFile()">ðŸ“¥ </button>
    <input type="filename" id="filename">
 &nbsp;
    <button onclick="multiKey()">ðŸª„ Generate</button>
 &nbsp;
    <input type="number" id="keyCount" value="10" placeholder="How Many Keys?">
</menu> 
</div>
<div>
<span id="hint"></span>
</div>

<script details="Gadget References" group="ðŸ¦‡">
  const sip   = document.getElementById( 'sip' );
  const hint  = document.getElementById( 'hint' );
  const tikey = document.getElementById( 'tikey' );
  const keyCount = document.getElementById( 'keyCount' );
</script>

<script details="Generate Single Key" group="ðŸ¦‡">
    function singleKey() {
        try {
            tikey.value = TiGG();
        } catch ( e ) {
            alert( e );
            throw e;
        }
    }
</script>

<script details="Generate Multiple Keys" group="ðŸ¦‡">
    function multiKey() {
        try {
            TiGG.raw( getCount(), sip );
        } catch ( e ) {
            if ( e instanceof KeyCountError ) {
                e.report();
                return;
            }
            alert( e );
            throw e;
        }
    }
    function getCount() {
        function error( s ) {
            throw new KeyCountError( s );
        }
        try {
            keyCount.classList.remove( "error" )
            let n = parseInt( keyCount.value );
            if (! isFinite( n ) ) {
                error( "Please enter an integer" );
            }
            if ( n < 1  ) error( "Range is 1 to 42 keys " );
            if ( n > 42 ) error( "Range is 1 to 42 keys " );
            return n;
        } catch ( e ) {
            throw e; 
        }
    }
</script>

<script details="Key Count Error Class" group="ðŸ”´">
    class KeyCountError extends Error {
        constructor( message ) {
            super( message );
            this.hintGadget.innerText = message;
            this.inputGadget.classList.add( "error" );
        }
        get hintGadget() {
            return document.getElementById( 'hint' );
        }
        get hint() {
            return this.hintGadget.innerText;
        }
        get inputGadget() {
            return document.getElementById( 'keyCount' );
        }
        get proposedCount() {
            return this.inputGadget.value;
        }
        report() {
            const hint = this.hint;
            const hintGadget = this.hintGadget;
            const inputGadget = this.inputGadget;
            const proposedCount = this.proposedCount;
            console.table(
                [
        [ "Hint"           , hint          ] ,
        [ "Hint Gadget"    , hintGadget    ] ,
        [ "Proposed Count" , proposedCount ] ,
        [ "Input Gadget"   , inputGadget   ]
                ]
            );
        }
    }
</script>
<!--
    ðŸ…»ðŸ…°ðŸ†‚ðŸ†ƒ ðŸ†„ðŸ…¿ðŸ…³ðŸ…°ðŸ†ƒðŸ…´ðŸ…³ ~ 2025-AUG-22 ~ Omega
-->
</body>
</html>